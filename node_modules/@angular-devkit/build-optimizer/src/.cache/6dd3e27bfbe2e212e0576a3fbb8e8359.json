{"remainingRequest":"/home/laredo/Área de Trabalho/OBAADM-WEB/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/home/laredo/Área de Trabalho/OBAADM-WEB/node_modules/html2canvas/dist/npm/Clone.js","dependencies":[{"path":"/home/laredo/Área de Trabalho/OBAADM-WEB/node_modules/html2canvas/dist/npm/Clone.js","mtime":1549298997000},{"path":"/home/laredo/Área de Trabalho/OBAADM-WEB/node_modules/cache-loader/dist/cjs.js","mtime":1549298993000},{"path":"/home/laredo/Área de Trabalho/OBAADM-WEB/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1549298984000}],"contextDependencies":[],"result":["'use strict';\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n    value: true\r\n});\r\nexports.cloneWindow = exports.DocumentCloner = undefined;\r\n\r\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\r\n\r\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\r\nvar _Bounds = require('./Bounds');\r\n\r\nvar _Proxy = require('./Proxy');\r\n\r\nvar _ResourceLoader = require('./ResourceLoader');\r\n\r\nvar _ResourceLoader2 = _interopRequireDefault(_ResourceLoader);\r\n\r\nvar _Util = require('./Util');\r\n\r\nvar _background = require('./parsing/background');\r\n\r\nvar _CanvasRenderer = require('./renderer/CanvasRenderer');\r\n\r\nvar _CanvasRenderer2 = _interopRequireDefault(_CanvasRenderer);\r\n\r\nvar _PseudoNodeContent = require('./PseudoNodeContent');\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nvar IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';\r\n\r\nvar DocumentCloner = exports.DocumentCloner = function () {\r\n    function DocumentCloner(element, options, logger, copyInline, renderer) {\r\n        _classCallCheck(this, DocumentCloner);\r\n\r\n        this.referenceElement = element;\r\n        this.scrolledElements = [];\r\n        this.copyStyles = copyInline;\r\n        this.inlineImages = copyInline;\r\n        this.logger = logger;\r\n        this.options = options;\r\n        this.renderer = renderer;\r\n        this.resourceLoader = new _ResourceLoader2.default(options, logger, window);\r\n        this.pseudoContentData = {\r\n            counters: {},\r\n            quoteDepth: 0\r\n        };\r\n        // $FlowFixMe\r\n        this.documentElement = this.cloneNode(element.ownerDocument.documentElement);\r\n    }\r\n\r\n    _createClass(DocumentCloner, [{\r\n        key: 'inlineAllImages',\r\n        value: function inlineAllImages(node) {\r\n            var _this = this;\r\n\r\n            if (this.inlineImages && node) {\r\n                var style = node.style;\r\n                Promise.all((0, _background.parseBackgroundImage)(style.backgroundImage).map(function (backgroundImage) {\r\n                    if (backgroundImage.method === 'url') {\r\n                        return _this.resourceLoader.inlineImage(backgroundImage.args[0]).then(function (img) {\r\n                            return img && typeof img.src === 'string' ? 'url(\"' + img.src + '\")' : 'none';\r\n                        }).catch(function (e) {\r\n                            if (process.env.NODE_ENV !== 'production') {\r\n                                _this.logger.log('Unable to load image', e);\r\n                            }\r\n                        });\r\n                    }\r\n                    return Promise.resolve('' + backgroundImage.prefix + backgroundImage.method + '(' + backgroundImage.args.join(',') + ')');\r\n                })).then(function (backgroundImages) {\r\n                    if (backgroundImages.length > 1) {\r\n                        // TODO Multiple backgrounds somehow broken in Chrome\r\n                        style.backgroundColor = '';\r\n                    }\r\n                    style.backgroundImage = backgroundImages.join(',');\r\n                });\r\n\r\n                if (node instanceof HTMLImageElement) {\r\n                    this.resourceLoader.inlineImage(node.src).then(function (img) {\r\n                        if (img && node instanceof HTMLImageElement && node.parentNode) {\r\n                            var parentNode = node.parentNode;\r\n                            var clonedChild = (0, _Util.copyCSSStyles)(node.style, img.cloneNode(false));\r\n                            parentNode.replaceChild(clonedChild, node);\r\n                        }\r\n                    }).catch(function (e) {\r\n                        if (process.env.NODE_ENV !== 'production') {\r\n                            _this.logger.log('Unable to load image', e);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }, {\r\n        key: 'inlineFonts',\r\n        value: function inlineFonts(document) {\r\n            var _this2 = this;\r\n\r\n            return Promise.all(Array.from(document.styleSheets).map(function (sheet) {\r\n                if (sheet.href) {\r\n                    return fetch(sheet.href).then(function (res) {\r\n                        return res.text();\r\n                    }).then(function (text) {\r\n                        return createStyleSheetFontsFromText(text, sheet.href);\r\n                    }).catch(function (e) {\r\n                        if (process.env.NODE_ENV !== 'production') {\r\n                            _this2.logger.log('Unable to load stylesheet', e);\r\n                        }\r\n                        return [];\r\n                    });\r\n                }\r\n                return getSheetFonts(sheet, document);\r\n            })).then(function (fonts) {\r\n                return fonts.reduce(function (acc, font) {\r\n                    return acc.concat(font);\r\n                }, []);\r\n            }).then(function (fonts) {\r\n                return Promise.all(fonts.map(function (font) {\r\n                    return fetch(font.formats[0].src).then(function (response) {\r\n                        return response.blob();\r\n                    }).then(function (blob) {\r\n                        return new Promise(function (resolve, reject) {\r\n                            var reader = new FileReader();\r\n                            reader.onerror = reject;\r\n                            reader.onload = function () {\r\n                                // $FlowFixMe\r\n                                var result = reader.result;\r\n                                resolve(result);\r\n                            };\r\n                            reader.readAsDataURL(blob);\r\n                        });\r\n                    }).then(function (dataUri) {\r\n                        font.fontFace.setProperty('src', 'url(\"' + dataUri + '\")');\r\n                        return '@font-face {' + font.fontFace.cssText + ' ';\r\n                    });\r\n                }));\r\n            }).then(function (fontCss) {\r\n                var style = document.createElement('style');\r\n                style.textContent = fontCss.join('\\n');\r\n                _this2.documentElement.appendChild(style);\r\n            });\r\n        }\r\n    }, {\r\n        key: 'createElementClone',\r\n        value: function createElementClone(node) {\r\n            var _this3 = this;\r\n\r\n            if (this.copyStyles && node instanceof HTMLCanvasElement) {\r\n                var img = node.ownerDocument.createElement('img');\r\n                try {\r\n                    img.src = node.toDataURL();\r\n                    return img;\r\n                } catch (e) {\r\n                    if (process.env.NODE_ENV !== 'production') {\r\n                        this.logger.log('Unable to clone canvas contents, canvas is tainted');\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (node instanceof HTMLIFrameElement) {\r\n                var tempIframe = node.cloneNode(false);\r\n                var iframeKey = generateIframeKey();\r\n                tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);\r\n\r\n                var _parseBounds = (0, _Bounds.parseBounds)(node, 0, 0),\r\n                    width = _parseBounds.width,\r\n                    height = _parseBounds.height;\r\n\r\n                this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(node, this.options).then(function (documentElement) {\r\n                    return _this3.renderer(documentElement, {\r\n                        async: _this3.options.async,\r\n                        allowTaint: _this3.options.allowTaint,\r\n                        backgroundColor: '#ffffff',\r\n                        canvas: null,\r\n                        imageTimeout: _this3.options.imageTimeout,\r\n                        logging: _this3.options.logging,\r\n                        proxy: _this3.options.proxy,\r\n                        removeContainer: _this3.options.removeContainer,\r\n                        scale: _this3.options.scale,\r\n                        foreignObjectRendering: _this3.options.foreignObjectRendering,\r\n                        useCORS: _this3.options.useCORS,\r\n                        target: new _CanvasRenderer2.default(),\r\n                        width: width,\r\n                        height: height,\r\n                        x: 0,\r\n                        y: 0,\r\n                        windowWidth: documentElement.ownerDocument.defaultView.innerWidth,\r\n                        windowHeight: documentElement.ownerDocument.defaultView.innerHeight,\r\n                        scrollX: documentElement.ownerDocument.defaultView.pageXOffset,\r\n                        scrollY: documentElement.ownerDocument.defaultView.pageYOffset\r\n                    }, _this3.logger.child(iframeKey));\r\n                }).then(function (canvas) {\r\n                    return new Promise(function (resolve, reject) {\r\n                        var iframeCanvas = document.createElement('img');\r\n                        iframeCanvas.onload = function () {\r\n                            return resolve(canvas);\r\n                        };\r\n                        iframeCanvas.onerror = reject;\r\n                        iframeCanvas.src = canvas.toDataURL();\r\n                        if (tempIframe.parentNode) {\r\n                            tempIframe.parentNode.replaceChild((0, _Util.copyCSSStyles)(node.ownerDocument.defaultView.getComputedStyle(node), iframeCanvas), tempIframe);\r\n                        }\r\n                    });\r\n                });\r\n                return tempIframe;\r\n            }\r\n\r\n            if (node instanceof HTMLStyleElement && node.sheet && node.sheet.cssRules) {\r\n                var css = [].slice.call(node.sheet.cssRules, 0).reduce(function (css, rule) {\r\n                    try {\r\n                        if (rule && rule.cssText) {\r\n                            return css + rule.cssText;\r\n                        }\r\n                        return css;\r\n                    } catch (err) {\r\n                        _this3.logger.log('Unable to access cssText property', rule.name);\r\n                        return css;\r\n                    }\r\n                }, '');\r\n                var style = node.cloneNode(false);\r\n                style.textContent = css;\r\n                return style;\r\n            }\r\n\r\n            return node.cloneNode(false);\r\n        }\r\n    }, {\r\n        key: 'cloneNode',\r\n        value: function cloneNode(node) {\r\n            var clone = node.nodeType === Node.TEXT_NODE ? document.createTextNode(node.nodeValue) : this.createElementClone(node);\r\n\r\n            var window = node.ownerDocument.defaultView;\r\n            var style = node instanceof window.HTMLElement ? window.getComputedStyle(node) : null;\r\n            var styleBefore = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':before') : null;\r\n            var styleAfter = node instanceof window.HTMLElement ? window.getComputedStyle(node, ':after') : null;\r\n\r\n            if (this.referenceElement === node && clone instanceof window.HTMLElement) {\r\n                this.clonedReferenceElement = clone;\r\n            }\r\n\r\n            if (clone instanceof window.HTMLBodyElement) {\r\n                createPseudoHideStyles(clone);\r\n            }\r\n\r\n            var counters = (0, _PseudoNodeContent.parseCounterReset)(style, this.pseudoContentData);\r\n            var contentBefore = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleBefore, this.pseudoContentData);\r\n\r\n            for (var child = node.firstChild; child; child = child.nextSibling) {\r\n                if (child.nodeType !== Node.ELEMENT_NODE || child.nodeName !== 'SCRIPT' &&\r\n                // $FlowFixMe\r\n                !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' ||\r\n                // $FlowFixMe\r\n                !this.options.ignoreElements(child))) {\r\n                    if (!this.copyStyles || child.nodeName !== 'STYLE') {\r\n                        clone.appendChild(this.cloneNode(child));\r\n                    }\r\n                }\r\n            }\r\n\r\n            var contentAfter = (0, _PseudoNodeContent.resolvePseudoContent)(node, styleAfter, this.pseudoContentData);\r\n            (0, _PseudoNodeContent.popCounters)(counters, this.pseudoContentData);\r\n\r\n            if (node instanceof window.HTMLElement && clone instanceof window.HTMLElement) {\r\n                if (styleBefore) {\r\n                    this.inlineAllImages(inlinePseudoElement(node, clone, styleBefore, contentBefore, PSEUDO_BEFORE));\r\n                }\r\n                if (styleAfter) {\r\n                    this.inlineAllImages(inlinePseudoElement(node, clone, styleAfter, contentAfter, PSEUDO_AFTER));\r\n                }\r\n                if (style && this.copyStyles && !(node instanceof HTMLIFrameElement)) {\r\n                    (0, _Util.copyCSSStyles)(style, clone);\r\n                }\r\n                this.inlineAllImages(clone);\r\n                if (node.scrollTop !== 0 || node.scrollLeft !== 0) {\r\n                    this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);\r\n                }\r\n                switch (node.nodeName) {\r\n                    case 'CANVAS':\r\n                        if (!this.copyStyles) {\r\n                            cloneCanvasContents(node, clone);\r\n                        }\r\n                        break;\r\n                    case 'TEXTAREA':\r\n                    case 'SELECT':\r\n                        clone.value = node.value;\r\n                        break;\r\n                }\r\n            }\r\n            return clone;\r\n        }\r\n    }]);\r\n\r\n    return DocumentCloner;\r\n}();\r\n\r\nvar getSheetFonts = function getSheetFonts(sheet, document) {\r\n    // $FlowFixMe\r\n    return (sheet.cssRules ? Array.from(sheet.cssRules) : []).filter(function (rule) {\r\n        return rule.type === CSSRule.FONT_FACE_RULE;\r\n    }).map(function (rule) {\r\n        var src = (0, _background.parseBackgroundImage)(rule.style.getPropertyValue('src'));\r\n        var formats = [];\r\n        for (var i = 0; i < src.length; i++) {\r\n            if (src[i].method === 'url' && src[i + 1] && src[i + 1].method === 'format') {\r\n                var a = document.createElement('a');\r\n                a.href = src[i].args[0];\r\n                if (document.body) {\r\n                    document.body.appendChild(a);\r\n                }\r\n\r\n                var font = {\r\n                    src: a.href,\r\n                    format: src[i + 1].args[0]\r\n                };\r\n                formats.push(font);\r\n            }\r\n        }\r\n\r\n        return {\r\n            // TODO select correct format for browser),\r\n\r\n            formats: formats.filter(function (font) {\r\n                return (/^woff/i.test(font.format)\r\n                );\r\n            }),\r\n            fontFace: rule.style\r\n        };\r\n    }).filter(function (font) {\r\n        return font.formats.length;\r\n    });\r\n};\r\n\r\nvar createStyleSheetFontsFromText = function createStyleSheetFontsFromText(text, baseHref) {\r\n    var doc = document.implementation.createHTMLDocument('');\r\n    var base = document.createElement('base');\r\n    // $FlowFixMe\r\n    base.href = baseHref;\r\n    var style = document.createElement('style');\r\n\r\n    style.textContent = text;\r\n    if (doc.head) {\r\n        doc.head.appendChild(base);\r\n    }\r\n    if (doc.body) {\r\n        doc.body.appendChild(style);\r\n    }\r\n\r\n    return style.sheet ? getSheetFonts(style.sheet, doc) : [];\r\n};\r\n\r\nvar restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {\r\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\r\n        ownerDocument.defaultView.scrollTo(x, y);\r\n    }\r\n};\r\n\r\nvar cloneCanvasContents = function cloneCanvasContents(canvas, clonedCanvas) {\r\n    try {\r\n        if (clonedCanvas) {\r\n            clonedCanvas.width = canvas.width;\r\n            clonedCanvas.height = canvas.height;\r\n            var ctx = canvas.getContext('2d');\r\n            var clonedCtx = clonedCanvas.getContext('2d');\r\n            if (ctx) {\r\n                clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);\r\n            } else {\r\n                clonedCtx.drawImage(canvas, 0, 0);\r\n            }\r\n        }\r\n    } catch (e) {}\r\n};\r\n\r\nvar inlinePseudoElement = function inlinePseudoElement(node, clone, style, contentItems, pseudoElt) {\r\n    if (!style || !style.content || style.content === 'none' || style.content === '-moz-alt-content' || style.display === 'none') {\r\n        return;\r\n    }\r\n\r\n    var anonymousReplacedElement = clone.ownerDocument.createElement('html2canvaspseudoelement');\r\n    (0, _Util.copyCSSStyles)(style, anonymousReplacedElement);\r\n\r\n    if (contentItems) {\r\n        var len = contentItems.length;\r\n        for (var i = 0; i < len; i++) {\r\n            var item = contentItems[i];\r\n            switch (item.type) {\r\n                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.IMAGE:\r\n                    var img = clone.ownerDocument.createElement('img');\r\n                    img.src = (0, _background.parseBackgroundImage)('url(' + item.value + ')')[0].args[0];\r\n                    img.style.opacity = '1';\r\n                    anonymousReplacedElement.appendChild(img);\r\n                    break;\r\n                case _PseudoNodeContent.PSEUDO_CONTENT_ITEM_TYPE.TEXT:\r\n                    anonymousReplacedElement.appendChild(clone.ownerDocument.createTextNode(item.value));\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\r\n    clone.className += pseudoElt === PSEUDO_BEFORE ? ' ' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : ' ' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\r\n    if (pseudoElt === PSEUDO_BEFORE) {\r\n        clone.insertBefore(anonymousReplacedElement, clone.firstChild);\r\n    } else {\r\n        clone.appendChild(anonymousReplacedElement);\r\n    }\r\n\r\n    return anonymousReplacedElement;\r\n};\r\n\r\nvar URL_REGEXP = /^url\\((.+)\\)$/i;\r\nvar PSEUDO_BEFORE = ':before';\r\nvar PSEUDO_AFTER = ':after';\r\nvar PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';\r\nvar PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';\r\n\r\nvar PSEUDO_HIDE_ELEMENT_STYLE = '{\\n    content: \"\" !important;\\n    display: none !important;\\n}';\r\n\r\nvar createPseudoHideStyles = function createPseudoHideStyles(body) {\r\n    createStyles(body, '.' + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + '\\n         .' + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);\r\n};\r\n\r\nvar createStyles = function createStyles(body, styles) {\r\n    var style = body.ownerDocument.createElement('style');\r\n    style.innerHTML = styles;\r\n    body.appendChild(style);\r\n};\r\n\r\nvar initNode = function initNode(_ref) {\r\n    var _ref2 = _slicedToArray(_ref, 3),\r\n        element = _ref2[0],\r\n        x = _ref2[1],\r\n        y = _ref2[2];\r\n\r\n    element.scrollLeft = x;\r\n    element.scrollTop = y;\r\n};\r\n\r\nvar generateIframeKey = function generateIframeKey() {\r\n    return Math.ceil(Date.now() + Math.random() * 10000000).toString(16);\r\n};\r\n\r\nvar DATA_URI_REGEXP = /^data:text\\/(.+);(base64)?,(.*)$/i;\r\n\r\nvar getIframeDocumentElement = function getIframeDocumentElement(node, options) {\r\n    try {\r\n        return Promise.resolve(node.contentWindow.document.documentElement);\r\n    } catch (e) {\r\n        return options.proxy ? (0, _Proxy.Proxy)(node.src, options).then(function (html) {\r\n            var match = html.match(DATA_URI_REGEXP);\r\n            if (!match) {\r\n                return Promise.reject();\r\n            }\r\n\r\n            return match[2] === 'base64' ? window.atob(decodeURIComponent(match[3])) : decodeURIComponent(match[3]);\r\n        }).then(function (html) {\r\n            return createIframeContainer(node.ownerDocument, (0, _Bounds.parseBounds)(node, 0, 0)).then(function (cloneIframeContainer) {\r\n                var cloneWindow = cloneIframeContainer.contentWindow;\r\n                var documentClone = cloneWindow.document;\r\n\r\n                documentClone.open();\r\n                documentClone.write(html);\r\n                var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\r\n                    return documentClone.documentElement;\r\n                });\r\n\r\n                documentClone.close();\r\n                return iframeLoad;\r\n            });\r\n        }) : Promise.reject();\r\n    }\r\n};\r\n\r\nvar createIframeContainer = function createIframeContainer(ownerDocument, bounds) {\r\n    var cloneIframeContainer = ownerDocument.createElement('iframe');\r\n\r\n    cloneIframeContainer.className = 'html2canvas-container';\r\n    cloneIframeContainer.style.visibility = 'hidden';\r\n    cloneIframeContainer.style.position = 'fixed';\r\n    cloneIframeContainer.style.left = '-10000px';\r\n    cloneIframeContainer.style.top = '0px';\r\n    cloneIframeContainer.style.border = '0';\r\n    cloneIframeContainer.width = bounds.width.toString();\r\n    cloneIframeContainer.height = bounds.height.toString();\r\n    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it\r\n    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');\r\n    if (!ownerDocument.body) {\r\n        return Promise.reject(process.env.NODE_ENV !== 'production' ? 'Body element not found in Document that is getting rendered' : '');\r\n    }\r\n\r\n    ownerDocument.body.appendChild(cloneIframeContainer);\r\n\r\n    return Promise.resolve(cloneIframeContainer);\r\n};\r\n\r\nvar iframeLoader = function iframeLoader(cloneIframeContainer) {\r\n    var cloneWindow = cloneIframeContainer.contentWindow;\r\n    var documentClone = cloneWindow.document;\r\n\r\n    return new Promise(function (resolve, reject) {\r\n        cloneWindow.onload = cloneIframeContainer.onload = documentClone.onreadystatechange = function () {\r\n            var interval = setInterval(function () {\r\n                if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {\r\n                    clearInterval(interval);\r\n                    resolve(cloneIframeContainer);\r\n                }\r\n            }, 50);\r\n        };\r\n    });\r\n};\r\n\r\nvar cloneWindow = exports.cloneWindow = function cloneWindow(ownerDocument, bounds, referenceElement, options, logger, renderer) {\r\n    var cloner = new DocumentCloner(referenceElement, options, logger, false, renderer);\r\n    var scrollX = ownerDocument.defaultView.pageXOffset;\r\n    var scrollY = ownerDocument.defaultView.pageYOffset;\r\n\r\n    return createIframeContainer(ownerDocument, bounds).then(function (cloneIframeContainer) {\r\n        var cloneWindow = cloneIframeContainer.contentWindow;\r\n        var documentClone = cloneWindow.document;\r\n\r\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\r\n             if window url is about:blank, we can assign the url to current by writing onto the document\r\n             */\r\n\r\n        var iframeLoad = iframeLoader(cloneIframeContainer).then(function () {\r\n            cloner.scrolledElements.forEach(initNode);\r\n            cloneWindow.scrollTo(bounds.left, bounds.top);\r\n            if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== bounds.top || cloneWindow.scrollX !== bounds.left)) {\r\n                documentClone.documentElement.style.top = -bounds.top + 'px';\r\n                documentClone.documentElement.style.left = -bounds.left + 'px';\r\n                documentClone.documentElement.style.position = 'absolute';\r\n            }\r\n\r\n            var result = Promise.resolve([cloneIframeContainer, cloner.clonedReferenceElement, cloner.resourceLoader]);\r\n\r\n            var onclone = options.onclone;\r\n\r\n            return cloner.clonedReferenceElement instanceof cloneWindow.HTMLElement || cloner.clonedReferenceElement instanceof ownerDocument.defaultView.HTMLElement || cloner.clonedReferenceElement instanceof HTMLElement ? typeof onclone === 'function' ? Promise.resolve().then(function () {\r\n                return onclone(documentClone);\r\n            }).then(function () {\r\n                return result;\r\n            }) : result : Promise.reject(process.env.NODE_ENV !== 'production' ? 'Error finding the ' + referenceElement.nodeName + ' in the cloned document' : '');\r\n        });\r\n\r\n        documentClone.open();\r\n        documentClone.write(serializeDoctype(document.doctype) + '<html></html>');\r\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\r\n        restoreOwnerScroll(referenceElement.ownerDocument, scrollX, scrollY);\r\n        documentClone.replaceChild(documentClone.adoptNode(cloner.documentElement), documentClone.documentElement);\r\n        documentClone.close();\r\n\r\n        return iframeLoad;\r\n    });\r\n};\r\n\r\nvar serializeDoctype = function serializeDoctype(doctype) {\r\n    var str = '';\r\n    if (doctype) {\r\n        str += '<!DOCTYPE ';\r\n        if (doctype.name) {\r\n            str += doctype.name;\r\n        }\r\n\r\n        if (doctype.internalSubset) {\r\n            str += doctype.internalSubset;\r\n        }\r\n\r\n        if (doctype.publicId) {\r\n            str += '\"' + doctype.publicId + '\"';\r\n        }\r\n\r\n        if (doctype.systemId) {\r\n            str += '\"' + doctype.systemId + '\"';\r\n        }\r\n\r\n        str += '>';\r\n    }\r\n\r\n    return str;\r\n};",null]}